# KS-Downloader TUI 优化测试清单

## 测试前准备

- [ ] 确保已安装最新版本的 textual
- [ ] 确保所有依赖已更新
- [ ] 备份当前配置文件

## 启动测试

### 基础启动
- [ ] 运行 `python main.py` 能正常启动 TUI
- [ ] 界面显示完整，无错误信息
- [ ] 主题色正确应用（nord 主题）

## 首页测试 (Index)

### 布局测试
- [ ] 页面标题显示正确
- [ ] 微信公众号信息显示
- [ ] 提示信息有背景和边框
- [ ] 输入框显示正常
- [ ] 按钮组水平排列
- [ ] 日志区域显示正常

### 按钮样式测试
- [ ] "下载作品文件" 按钮使用主题色（primary variant）
- [ ] 其他按钮使用默认样式
- [ ] 鼠标悬停时按钮有视觉反馈
- [ ] Tab 键切换焦点时按钮文字加粗

### 功能测试
- [ ] 输入链接后点击下载按钮能正常工作
- [ ] 清空按钮能清空输入框
- [ ] 日志实时显示在日志区域
- [ ] 欢迎信息正确显示

### 快捷键测试
- [ ] Q 键退出程序
- [ ] U 键打开更新检查
- [ ] S 键打开设置页面
- [ ] A 键打开关于页面

## 设置页面测试 (Settings)

### 布局测试
- [ ] 页面标题显示 "程序设置"
- [ ] 三个设置区块清晰分离
- [ ] 每个区块有边框和背景
- [ ] 区块内元素对齐正确

### 语言设置区块
- [ ] "程序语言" 标题使用强调色和粗体
- [ ] 语言选择框显示当前语言
- [ ] "保存语言设置" 按钮使用 primary variant
- [ ] 点击保存后显示成功通知

### 下载记录区块
- [ ] "下载记录" 标题显示正确
- [ ] 状态标签有左侧强调边框
- [ ] 状态文字显示当前开关状态
- [ ] 切换按钮能改变状态
- [ ] 状态改变后标签文字更新

### Cookie 设置区块
- [ ] "Cookie 设置" 标题显示正确
- [ ] 读取 Cookie 按钮显示正常
- [ ] 点击后显示相应通知

### 导航测试
- [ ] "返回首页" 按钮使用 default variant
- [ ] 点击返回按钮能回到首页
- [ ] B 键能返回首页
- [ ] Q 键能退出程序

## 关于页面测试 (About)

### 布局测试
- [ ] 页面标题显示项目名称
- [ ] 所有信息居中显示
- [ ] 信息之间间距合理
- [ ] 返回按钮位置正确

### 内容测试
- [ ] 项目名称使用 MASTER 样式
- [ ] 版本信息显示正确
- [ ] 开源协议显示正确
- [ ] 仓库链接可点击
- [ ] 链接有下划线和悬停效果

### 导航测试
- [ ] "返回首页" 按钮使用 default variant
- [ ] 点击返回按钮能回到首页
- [ ] B 键能返回首页
- [ ] U 键能打开更新检查
- [ ] Q 键能退出程序

## 模态窗口测试

### 加载窗口 (Loading)
- [ ] 下载时自动显示加载窗口
- [ ] 窗口居中显示
- [ ] 有边框和背景
- [ ] 有阴影效果
- [ ] 加载指示器正常动画
- [ ] 处理完成后自动关闭

### 更新检查窗口 (Update)
- [ ] 点击检查更新显示加载窗口
- [ ] 窗口样式与加载窗口一致
- [ ] 检查完成后显示结果通知
- [ ] 窗口自动关闭

### 免责声明窗口 (Disclaimer)
- [ ] 首次启动显示免责声明
- [ ] 窗口占据 90vw x 80vh
- [ ] 使用警告色边框
- [ ] 标题有特殊背景和边框
- [ ] 内容可滚动
- [ ] 按钮区域有两个按钮
- [ ] 点击接受后不再显示
- [ ] 点击退出后程序关闭

## 交互反馈测试

### 悬停效果
- [ ] 所有按钮悬停时有背景色变化
- [ ] 所有按钮悬停时边框变为强调色
- [ ] 链接悬停时有背景色变化
- [ ] 悬停效果流畅无闪烁

### 焦点效果
- [ ] Tab 键能在所有可交互元素间切换
- [ ] 焦点元素有明显的视觉指示
- [ ] 按钮焦点时文字加粗
- [ ] 输入框焦点时边框变为强调色
- [ ] 选择框焦点时边框变为强调色

### 通知系统
- [ ] 成功操作显示 information 级别通知
- [ ] 警告操作显示 warning 级别通知
- [ ] 错误操作显示 error 级别通知
- [ ] 通知自动消失
- [ ] 通知位置合理

## 响应式测试

### 不同终端尺寸
- [ ] 80x24 (最小推荐尺寸) 显示正常
- [ ] 120x30 (中等尺寸) 显示正常
- [ ] 160x40 (大尺寸) 显示正常
- [ ] 窗口调整大小时布局自适应

### 内容溢出
- [ ] 长文本自动换行
- [ ] 日志区域可滚动
- [ ] 设置页面可滚动
- [ ] 免责声明内容可滚动
- [ ] 滚动条显示正常

## 主题测试

### 当前主题 (nord)
- [ ] 主题色正确应用
- [ ] 文字对比度足够
- [ ] 边框清晰可见
- [ ] 背景色合理

### 其他主题 (可选)
- [ ] 切换到 dracula 主题正常
- [ ] 切换到 monokai 主题正常
- [ ] 切换到 gruvbox 主题正常
- [ ] 所有主题下样式都正确

## 多语言测试

### 中文 (zh_CN)
- [ ] 所有界面文字显示中文
- [ ] 标签样式正确应用
- [ ] 按钮文字完整显示
- [ ] 通知消息显示中文

### 英文 (en_US)
- [ ] 切换到英文后界面更新
- [ ] 所有界面文字显示英文
- [ ] 标签样式正确应用
- [ ] 按钮文字完整显示
- [ ] 通知消息显示英文

## 性能测试

### 启动性能
- [ ] 启动时间无明显增加
- [ ] 首屏渲染流畅
- [ ] 无卡顿现象

### 运行性能
- [ ] 页面切换流畅
- [ ] 日志输出不卡顿
- [ ] 长时间运行无内存泄漏
- [ ] CPU 占用正常

### 内存占用
- [ ] 启动后内存占用合理
- [ ] 运行过程中内存稳定
- [ ] 关闭后内存释放完全

## 兼容性测试

### 终端兼容性
- [ ] macOS Terminal 正常显示
- [ ] iTerm2 正常显示
- [ ] Windows Terminal 正常显示
- [ ] Linux 终端正常显示

### Python 版本
- [ ] Python 3.10 正常运行
- [ ] Python 3.11 正常运行
- [ ] Python 3.12 正常运行

### Textual 版本
- [ ] 当前 Textual 版本正常
- [ ] 最新 Textual 版本兼容

## 回归测试

### 原有功能
- [ ] 下载功能正常
- [ ] 链接解析正常
- [ ] Cookie 读取正常
- [ ] 配置保存正常
- [ ] 数据库操作正常

### API 模式
- [ ] `python main.py api` 正常启动
- [ ] API 路由正常工作
- [ ] 不受 TUI 优化影响

## 边界情况测试

### 异常输入
- [ ] 空输入提示正确
- [ ] 无效链接提示正确
- [ ] 特殊字符处理正常

### 网络异常
- [ ] 网络断开时提示正确
- [ ] 超时处理正常
- [ ] 重试机制正常

### 文件系统
- [ ] 磁盘空间不足提示正确
- [ ] 权限不足提示正确
- [ ] 路径不存在提示正确

## 文档测试

### 文档完整性
- [ ] TUI_优化说明.md 内容完整
- [ ] TUI_样式指南.md 内容完整
- [ ] TUI_优化对比.md 内容完整
- [ ] TUI_Optimization_Summary_EN.md 内容完整
- [ ] TUI_测试清单.md (本文件) 内容完整

### 文档准确性
- [ ] 代码示例可运行
- [ ] 样式说明准确
- [ ] 截图（如有）清晰
- [ ] 链接（如有）有效

## 测试结果记录

### 测试环境
- 操作系统: _______________
- Python 版本: _______________
- Textual 版本: _______________
- 终端: _______________
- 终端尺寸: _______________

### 发现的问题
1. _______________
2. _______________
3. _______________

### 测试结论
- [ ] 所有测试通过，可以发布
- [ ] 部分测试失败，需要修复
- [ ] 重大问题，需要重新设计

### 测试人员
- 姓名: _______________
- 日期: _______________
- 签名: _______________

---

## 测试技巧

### 快速测试
```bash
# 启动 TUI
python main.py

# 在另一个终端查看日志
tail -f logs/app.log
```

### 调试模式
```bash
# 启动 Textual 开发者控制台
textual console

# 在另一个终端运行应用
python main.py
```

### 性能分析
```bash
# 使用 Python profiler
python -m cProfile -o profile.stats main.py

# 分析结果
python -m pstats profile.stats
```

### 内存分析
```bash
# 使用 memory_profiler
pip install memory_profiler
python -m memory_profiler main.py
```

---

## 自动化测试 (未来)

### 单元测试
```bash
pytest tests/test_tui.py
```

### 集成测试
```bash
pytest tests/test_integration.py
```

### 快照测试
```bash
pytest tests/test_snapshots.py --snapshot-update
```

---

## 反馈渠道

如果发现任何问题，请通过以下方式反馈：
1. GitHub Issues
2. 项目讨论区
3. 开发者邮件列表

---

**测试愉快！** 🎉
